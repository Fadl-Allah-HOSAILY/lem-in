<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Graph Visualization</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    svg {
      border: 1px solid #ccc;
      background: #fafafa;
    }
    line {
      stroke: #333;
      stroke-width: 2;
    }
    circle {
      fill: steelblue;
      stroke: #222;
      stroke-width: 1.5;
    }
    text {
      font-size: 12px;
      fill: black;
      text-anchor: middle;
      alignment-baseline: middle;
    }
    .start { fill: green; }
    .end { fill: red; }
  </style>
</head>
<body>
  <h2>Graph of Ant Farm (3 ants)</h2>
  <svg width="600" height="400"></svg>

  <script>
    const graph = {
      "Rooms": {
        "0": { "Name": "0", "X": 9, "Y": 5 },
        "1": { "Name": "1", "X": 23, "Y": 3 },
        "2": { "Name": "2", "X": 16, "Y": 7 },
        "3": { "Name": "3", "X": 16, "Y": 3 },
        "4": { "Name": "4", "X": 16, "Y": 5 },
        "5": { "Name": "5", "X": 9, "Y": 3 },
        "6": { "Name": "6", "X": 1, "Y": 5 },
        "7": { "Name": "7", "X": 4, "Y": 8 }
      },
      "Links": {
        "0": ["4", "6"],
        "1": ["3", "2"],
        "2": ["5", "4", "1", "7"],
        "3": ["1", "4", "5"],
        "4": ["0", "3", "2", "7"],
        "5": ["2", "3", "6"],
        "6": ["0", "7", "5"],
        "7": ["6", "2", "4"]
      },
      "Start": "1",
      "End": "0"
    };

    const width = 600, height = 400, scale = 20;

    const svg = d3.select("svg");

    // Draw links
    Object.entries(graph.Links).forEach(([from, tos]) => {
      tos.forEach(to => {
        svg.append("line")
          .attr("x1", graph.Rooms[from].X * scale)
          .attr("y1", graph.Rooms[from].Y * scale)
          .attr("x2", graph.Rooms[to].X * scale)
          .attr("y2", graph.Rooms[to].Y * scale);
      });
    });

    // Draw rooms
    Object.values(graph.Rooms).forEach(room => {
      svg.append("circle")
        .attr("cx", room.X * scale)
        .attr("cy", room.Y * scale)
        .attr("r", 12)
        .attr("class", 
          room.Name === graph.Start ? "start" : 
          room.Name === graph.End ? "end" : "");

      svg.append("text")
        .attr("x", room.X * scale)
        .attr("y", room.Y * scale)
        .text(room.Name);
    });
  </script>
</body>
</html>
